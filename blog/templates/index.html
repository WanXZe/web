{% extends "base.html" %}
{% block title %}首页 - WanXZe's Blog{% endblock %}
{% block content %}
<div class="grid grid-2">
        {% if 'id' in session %}
            <div class="card fade-in">
                <p>如果你想要学什么，就来这留言吧~~~</p>
                 <form action="/" method="POST" >
                    <input type="hidden" id="author" name="author" value="{{session['user-name']}}">
                    <input type="hidden" id="id" name="id" value="{{session['id']}}">
                    <input type="text" id="Q" name="Q"  class="form-control" placeholder="在这输入你想学的东西~">
                    <div class="form-group">
                        <label class="form-label">验证码</label>
                        <div style="display: flex; gap: 1rem;">
                            <input type="text" name="captcha" class="form-control" placeholder="输入验证码" required>
                            <img src="/captcha" alt="验证码" onclick="this.src='/captcha?r='+Math.random()" 
                            style="height: 45px; border-radius: var(--radius-md); cursor: pointer;">
                        </div>
                    </div>
                    <button id="submit-btn" type="submit" class="btn btn-primary"> 提交</button>
                </form>
                
                {% if msg %}
                    {{ msg }}
                {% endif %}
            
            </div>
        {% else %}
            <div style="text-align: center; padding: 3rem 0;">
                <i class="fas fa-user-circle" style="font-size: 4rem; color: var(--primary); margin-bottom: 1rem;"></i>
                <h1 style="font-size: 2rem; margin-bottom: 1rem;">你好，访客！</h1>
                <p style="color: var(--text-secondary); margin-bottom: 2rem;">登录后开始你的创作之旅</p>
                <a href="/login" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i> 立即登录
                </a>
            </div>
        {% endif %}
    </div>
</div>

{% if error %}
    <div class="card" style="margin-top: 2rem; border-left: 4px solid #ef4444;">
        <p style="color: #ef4444; margin: 0;">
            <i class="fas fa-exclamation-circle"></i> {{error}}
        </p>
    </div>
{% endif %}
<script>
    document.getElementById('submit-btn').addEventListener('click', function() {
        this.disabled = true;
        this.form.submit();
    });
</script>
{% endblock %}